<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Fetch API</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $("#btn_fetch_data").click(function () {
            doGetJSON();


        });


        function doGetJSON() {
            // A URL returns JSON data.
            var url = "https://rawgit.com/o7planning/webexamples/master/_testdatas_/json-simple-data.json";

            // Call fetch(url) with default options.
            // It returns a Promise object:
            var aPromise = fetch(url);

            // Work with Promise object:
            aPromise
                .then(function (response) {
                    console.log("OK! Server returns a response object:");
                    console.log(response);

                    if (!response.ok) {
                        throw new Error("HTTP error, status = " + response.status);
                    }

                    // Get JSON Promise from response object:
                    var myJSON_promise = response.json();

                    // Work with Promise object:
                    myJSON_promise.then(function (myJSON) {
                        console.log("OK! JSON DATA: ", myJSON);
                    })

                    // Returns a Promise object.
                    return myJSON_promise;
                })
                .catch(function (error) {
                    console.log("Noooooo! Something error:");
                    console.log(error);
                });

        }

        function doGetText() {
            // A URL returns TEXT data.
            var url = "https://rawgit.com/o7planning/webexamples/master/_testdatas_/simple-text-data.txt";

            // Call fetch(url) with default options.
            // It returns a Promise object (Resolve response object)
            var aPromise = fetch(url);

            // Work with Promise object:
            aPromise
                .then(function (response) {
                    console.log("OK! Server returns a response object:");
                    console.log(response);

                    if (!response.ok) {
                        throw new Error("HTTP error, status = " + response.status);
                    }

                    response.text()
                        .then(function (myText) {
                            console.log("Text: ", myText);
                        })
                        .catch(function (error) {
                            // Never happened.
                        });

                })
                .catch(function (error) {
                    console.log("Noooooo! Something error:");
                    // Network Error!
                    console.log(error);
                });
        }
    });
</script>
<body>
<h1>Test Fetch API</h1>
<input type="button" id="btn_fetch_data" value="Fetch Data">
</body>
</html>